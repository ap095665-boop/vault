<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculator</title>

<style>
body{background:#0b0b0b;font-family:monospace;color:#00ff88;text-align:center}
#calc{margin-top:60px}
button{width:70px;height:60px;margin:6px;font-size:18px;border:none;border-radius:12px;background:#161616;color:#00ff88}
#display{width:300px;height:60px;background:#000;color:#00ff88;font-size:26px;margin-bottom:15px;text-align:right;padding:10px;border-radius:10px}
.hidden{display:none}
.box{background:#111;padding:12px;margin:12px;border-radius:12px}
input{width:70%;padding:10px;margin:5px;background:#000;color:#00ff88;border:none;border-radius:6px}
.copy{background:#222;width:65px;height:35px}
.bigbtn{width:200px;height:45px}
</style>
</head>

<body>

<!-- CALCULATOR -->
<div id="calc">
<input id="display" readonly><br>

<div>
<button onclick="press('7')">7</button>
<button onclick="press('8')">8</button>
<button onclick="press('9')">9</button>
</div>
<div>
<button onclick="press('4')">4</button>
<button onclick="press('5')">5</button>
<button onclick="press('6')">6</button>
</div>
<div>
<button onclick="press('1')">1</button>
<button onclick="press('2')">2</button>
<button onclick="press('3')">3</button>
</div>
<div>
<button onclick="press('0')">0</button>
<button onclick="check()">=</button>
<button onclick="clr()">C</button>
</div>
</div>

<!-- VAULT -->
<div id="vault" class="hidden">
<h2>PRIVATE VAULT</h2>

<h3>ğŸ¦ Bank</h3>
<button class="bigbtn" onclick="addField('bank')">+ Add Bank</button>
<div id="bank"></div>

<h3>ğŸ’³ Cards</h3>
<button class="bigbtn" onclick="addField('card')">+ Add Card</button>
<div id="card"></div>

<h3>ğŸ“± UPI</h3>
<button class="bigbtn" onclick="addField('upi')">+ Add UPI</button>
<div id="upi"></div>

<h3>ğŸ‘› Wallet</h3>
<button class="bigbtn" onclick="addField('wallet')">+ Add Wallet</button>
<div id="wallet"></div>

<h3>ğŸ§© Custom</h3>
<button class="bigbtn" onclick="addField('custom')">+ Add Custom</button>
<div id="custom"></div>

<br><br>
<button class="bigbtn" onclick="saveData()">ğŸ’¾ SAVE DATA</button>
<button class="bigbtn" onclick="lock()">ğŸ”’ LOCK</button>
</div>

<script>
const secret="262552";
let calc="";

// calculator
function press(n){calc+=n;display.value=calc}
function clr(){calc="";display.value=""}
function check(){ if(calc===secret){fingerprint()} calc="";display.value="" }

// ---------- fingerprint ----------
async function fingerprint(){
 try{
  let registered=localStorage.getItem("fp_done");

  // first time register
  if(!registered){
   const cred=await navigator.credentials.create({
    publicKey:{
     challenge:new Uint8Array(32),
     rp:{name:"Vault"},
     user:{id:new Uint8Array(16),name:"user",displayName:"Vault User"},
     pubKeyCredParams:[{type:"public-key",alg:-7}],
     authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"},
     timeout:60000
    }
   });

   if(!cred){alert("Fingerprint failed");return;}
   localStorage.setItem("fp_done","yes");
   alert("Fingerprint registered. Scan again to unlock.");
   return;
  }

  // login
  await navigator.credentials.get({
   publicKey:{
    challenge:new Uint8Array(32),
    userVerification:"required",
    timeout:60000
   }
  });

  openVault();

 }catch(e){
  alert("Fingerprint cancelled or not supported");
 }
}

// open vault
function openVault(){
 document.getElementById("calc").style.display="none";
 document.getElementById("vault").classList.remove("hidden");
 loadData();
}

function lock(){location.reload()}

// ---------- IndexedDB ----------
let db;
const req=indexedDB.open("PRIVATE_VAULT_DB",1);

req.onupgradeneeded=e=>{
 db=e.target.result;
 db.createObjectStore("vault",{keyPath:"id"});
};

req.onsuccess=e=>{
 db=e.target.result;
};

// save
function saveData(){
 const data={
  bank:bank.innerHTML,
  card:card.innerHTML,
  upi:upi.innerHTML,
  wallet:wallet.innerHTML,
  custom:custom.innerHTML
 };

 const tx=db.transaction(["vault"],"readwrite");
 const store=tx.objectStore("vault");
 store.put({id:"data",content:data});

 alert("Saved permanently âœ”");
}

// load
function loadData(){
 const tx=db.transaction(["vault"],"readonly");
 const store=tx.objectStore("vault");
 const get=store.get("data");

 get.onsuccess=()=>{
  if(get.result){
   const d=get.result.content;
   bank.innerHTML=d.bank||"";
   card.innerHTML=d.card||"";
   upi.innerHTML=d.upi||"";
   wallet.innerHTML=d.wallet||"";
   custom.innerHTML=d.custom||"";
  }
 };
}

// add field
function addField(section){
 let d=document.createElement("div");
 d.className="box";
 d.innerHTML=`<input placeholder="Enter data">
 <button class="copy" onclick="copyText(this)">Copy</button>`;
 document.getElementById(section).appendChild(d);
}

// copy
function copyText(btn){
 navigator.clipboard.writeText(btn.previousElementSibling.value);
}
</script>
</body>
</html>
