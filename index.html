<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vault</title>

<style>
body{background:#000;color:#00ff9c;font-family:monospace;padding:15px}
button{padding:10px;margin:5px;border:none;border-radius:8px;background:#003b2a;color:#00ff9c}
input{padding:8px;margin:5px;border-radius:6px;border:none;width:80%;background:#001a12;color:#00ff9c}
.box{background:#001a12;padding:10px;margin:10px 0;border-radius:10px}
.copy{background:#00291d}
.center{text-align:center;margin-top:120px}
.hidden{display:none}
.blur{filter:blur(20px)}
</style>
</head>

<body>

<div id="lock" class="center">
<h2>‚óâ SECURE VAULT</h2>
<button onclick="setup()">First Time Fingerprint Setup</button>
<button onclick="unlock()">Unlock</button>
</div>

<div id="app" class="hidden">

<h2>üè¶ BANK</h2>
<button onclick="addBank()">+ Bank</button>
<div id="banks"></div>

<h2>üí≥ CARDS</h2>
<button onclick="addCard()">+ Card</button>
<div id="cards"></div>

<h2>üì± UPI</h2>
<button onclick="addUPI()">+ UPI</button>
<div id="upi"></div>

<h2>üëõ WALLET</h2>
<button onclick="addWallet()">+ Wallet</button>
<div id="wallet"></div>

<h2>üß© CUSTOM</h2>
<button onclick="addCustom()">+ Custom</button>
<div id="custom"></div>

<br>
<button onclick="fakeVault()">Open Fake Vault</button>
<button onclick="wipe()">‚ò† Self Destruct</button>
<button onclick="lock()">üîí Lock</button>
</div>

<script>
let fail=0;

// -------- fingerprint setup ----------
async function setup(){
 try{
  const cred = await navigator.credentials.create({
   publicKey:{
    challenge:new Uint8Array(32),
    rp:{name:"Vault"},
    user:{id:new Uint8Array(16),name:"user",displayName:"user"},
    pubKeyCredParams:[{type:"public-key",alg:-7}],
    authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"},
    timeout:60000
   }
  });
  localStorage.setItem("vaultKey",btoa(String.fromCharCode(...new Uint8Array(cred.rawId))));
  alert("Fingerprint registered");
 }catch(e){alert("Setup failed")}
}

// -------- unlock ----------
async function unlock(){
 try{
  const id=localStorage.getItem("vaultKey");
  if(!id){alert("Setup first");return;}
  const raw=Uint8Array.from(atob(id),c=>c.charCodeAt(0));

  await navigator.credentials.get({
   publicKey:{
    challenge:new Uint8Array(32),
    allowCredentials:[{id:raw,type:"public-key"}],
    userVerification:"required",
    timeout:60000
   }
  });

  fail=0;
  showApp();

 }catch(e){
  fail++;
  if(fail>=5){wipe()}
  alert("Failed attempt "+fail);
 }
}

// -------- show app ----------
function showApp(){
 document.getElementById("lock").style.display="none";
 document.getElementById("app").classList.remove("hidden");
}

// -------- lock ----------
function lock(){location.reload()}

// -------- wipe ----------
function wipe(){
 localStorage.clear();
 alert("Vault destroyed");
 location.reload();
}

// -------- fake vault ----------
function fakeVault(){
 document.getElementById("lock").style.display="none";
 document.getElementById("app").classList.remove("hidden");
 document.getElementById("app").innerHTML="<h2>Empty vault</h2>";
}

// -------- auto lock ----------
document.addEventListener("visibilitychange",()=>{
 if(document.hidden) location.reload();
});

// -------- copy ----------
function copyText(el){navigator.clipboard.writeText(el.value)}

// -------- BANK ----------
let bankCount=0;
function addBank(){
 if(bankCount>=10) return alert("Max 10");
 bankCount++;
 let d=document.createElement("div");
 d.className="box";
 d.innerHTML=`<b>Bank ${bankCount}</b>
 <button onclick="addRow(this)">+ Row</button>
 <div class="rows"></div>`;
 document.getElementById("banks").appendChild(d);
}
function addRow(btn){
 let c=btn.nextElementSibling;
 if(c.children.length>=5) return alert("Max 5");
 let r=document.createElement("div");
 r.innerHTML=`<input placeholder="Data">
 <button class="copy" onclick="copyText(this.previousElementSibling)">Copy</button>`;
 c.appendChild(r);
}

// -------- CARD ----------
function addCard(){
 let d=document.createElement("div");
 d.className="box";
 d.innerHTML=`
 <input placeholder="Card number"><button class="copy" onclick="copyText(this.previousElementSibling)">Copy</button>
 <input placeholder="Expiry"><button class="copy" onclick="copyText(this.previousElementSibling)">Copy</button>
 <input placeholder="CVV"><button class="copy" onclick="copyText(this.previousElementSibling)">Copy</button>`;
 document.getElementById("cards").appendChild(d);
}

// -------- UPI ----------
function addUPI(){
 let d=document.createElement("div");
 d.className="box";
 d.innerHTML=`<input placeholder="UPI ID">
 <button class="copy" onclick="copyText(this.previousElementSibling)">Copy</button>`;
 document.getElementById("upi").appendChild(d);
}

// -------- WALLET ----------
function addWallet(){
 let d=document.createElement("div");
 d.className="box";
 d.innerHTML=`
 <input placeholder="Wallet ID"><button class="copy" onclick="copyText(this.previousElementSibling)">Copy</button>
 <input placeholder="Password"><button class="copy" onclick="copyText(this.previousElementSibling)">Copy</button>`;
 document.getElementById("wallet").appendChild(d);
}

// -------- CUSTOM ----------
function addCustom(){
 let t=prompt("Title");
 if(!t) return;
 let d=document.createElement("div");
 d.className="box";
 d.innerHTML=`<b>${t}</b>
 <button onclick="addCustomRow(this)">+ Row</button>
 <div></div>`;
 document.getElementById("custom").appendChild(d);
}
function addCustomRow(btn){
 let c=btn.nextElementSibling;
 let r=document.createElement("div");
 r.innerHTML=`<input placeholder="Data">
 <button class="copy" onclick="copyText(this.previousElementSibling)">Copy</button>`;
 c.appendChild(r);
}
</script>
</body>
</html>
