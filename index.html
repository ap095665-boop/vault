<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Private Vault</title>

<style>
body{background:#0b0b0b;font-family:monospace;color:#00ff88;margin:0;text-align:center}
button{padding:10px 16px;border:none;border-radius:10px;background:#111;color:#00ff88}
input{width:95%;padding:10px;margin:6px;background:#000;color:#00ff88;border:none;border-radius:8px}
.section{background:#111;margin:12px;padding:12px;border-radius:12px}
.copy{margin-top:6px;background:#222}
#addBtn{
position:fixed;bottom:20px;right:20px;
width:60px;height:60px;border-radius:50%;
font-size:28px;background:#00ff88;color:#000}
#popup{
position:fixed;top:0;left:0;right:0;bottom:0;
background:#000;display:none;overflow:auto;padding:20px}
.dot{
width:70px;height:70px;border-radius:50%;
background:#111;border:2px solid #00ff88;
color:#00ff88;font-size:20px;margin:8px;
}
.grid{display:grid;grid-template-columns:repeat(3,80px);gap:20px;justify-content:center;margin-top:40px}
</style>
</head>

<body>

<!-- PATTERN LOCK -->
<div id="lock">
<h2 id="lockTitle">Create Pattern</h2>

<div class="grid">
<button class="dot" onclick="tap(1)">1</button>
<button class="dot" onclick="tap(2)">2</button>
<button class="dot" onclick="tap(3)">3</button>
<button class="dot" onclick="tap(4)">4</button>
<button class="dot" onclick="tap(5)">5</button>
<button class="dot" onclick="tap(6)">6</button>
<button class="dot" onclick="tap(7)">7</button>
<button class="dot" onclick="tap(8)">8</button>
<button class="dot" onclick="tap(9)">9</button>
</div>

<br>
<button onclick="savePattern()">Save Pattern</button>
<button onclick="unlockPattern()">Unlock</button>
<button onclick="clearPattern()">Clear</button>
</div>

<!-- VAULT -->
<div id="vault" style="display:none;padding:15px">
<h2>PRIVATE VAULT</h2>
<div id="dataArea"></div>
</div>

<button id="addBtn" onclick="openPopup()" style="display:none">+</button>

<!-- POPUP -->
<div id="popup">
<h3>Add Data</h3>

<h4>üè¶ Bank</h4>
<div id="bankFields"></div>
<button onclick="addBank()">+ Add Bank</button>

<h4>üí≥ Cards</h4>
<div id="cardFields"></div>
<button onclick="addCard()">+ Add Card</button>

<h4>üì± UPI</h4>
<div id="upiFields"></div>
<button onclick="addUpi()">+ Add UPI</button>

<h4>üëõ Wallet</h4>
<div id="walletFields"></div>
<button onclick="addWallet()">+ Add Wallet</button>

<h4>üß© Custom</h4>
<input id="customTitle" placeholder="Custom title">
<input id="customValue" placeholder="Custom data">

<br><br>
<button onclick="saveData()">SAVE</button>
<button onclick="closePopup()">CANCEL</button>
</div>

<script>
// ================= PATTERN LOCK =================
let patternInput=[];

function tap(n){ patternInput.push(n); }

function clearPattern(){ patternInput=[]; }

function savePattern(){
 if(localStorage.getItem("vaultPattern")){
  alert("Pattern already set");
  return;
 }
 if(patternInput.length<4){
  alert("Use minimum 4 dots");
  return;
 }
 localStorage.setItem("vaultPattern",patternInput.join(""));
 alert("Pattern saved permanently");
 patternInput=[];
 location.reload();
}

function unlockPattern(){
 let saved=localStorage.getItem("vaultPattern");
 if(!saved){
  alert("Create pattern first");
  return;
 }
 if(patternInput.join("")===saved){
  document.getElementById("lock").style.display="none";
  document.getElementById("vault").style.display="block";
  document.getElementById("addBtn").style.display="block";
  loadData();
 }else{
  alert("Wrong pattern");
 }
 patternInput=[];
}

window.onload=function(){
 if(localStorage.getItem("vaultPattern")){
  document.getElementById("lockTitle").innerText="Draw Pattern to Unlock";
 }
};

// ================= POPUP CONTROL =================
function openPopup(){popup.style.display="block";}
function closePopup(){popup.style.display="none";}

// ================= ADD FIELDS =================
function addBank(){
 bankFields.innerHTML+=`
 <div class="section">
 <input placeholder="Account number">
 <input placeholder="IFSC">
 <input placeholder="Bank name">
 <input placeholder="Branch">
 </div>`;
}

function addCard(){
 cardFields.innerHTML+=`
 <div class="section">
 <input placeholder="Card number">
 <input placeholder="Name">
 <input placeholder="Expiry">
 <input placeholder="CVV">
 <input placeholder="PIN hint">
 </div>`;
}

function addUpi(){
 upiFields.innerHTML+=`
 <div class="section">
 <input placeholder="UPI ID">
 <input placeholder="Name">
 </div>`;
}

function addWallet(){
 walletFields.innerHTML+=`
 <div class="section">
 <input placeholder="Wallet name">
 <input placeholder="ID/email">
 <input placeholder="Password/PIN">
 </div>`;
}

// ================= SAVE DATA =================
function saveData(){

 let entry={bank:[],card:[],upi:[],wallet:[],
 customTitle:customTitle.value,
 customValue:customValue.value};

// bank
bankFields.querySelectorAll(".section").forEach(sec=>{
 let vals=[...sec.querySelectorAll("input")].map(i=>i.value);
 entry.bank.push(vals);
});

// card
cardFields.querySelectorAll(".section").forEach(sec=>{
 let vals=[...sec.querySelectorAll("input")].map(i=>i.value);
 entry.card.push(vals);
});

// upi
upiFields.querySelectorAll(".section").forEach(sec=>{
 let vals=[...sec.querySelectorAll("input")].map(i=>i.value);
 entry.upi.push(vals);
});

// wallet
walletFields.querySelectorAll(".section").forEach(sec=>{
 let vals=[...sec.querySelectorAll("input")].map(i=>i.value);
 entry.wallet.push(vals);
});

let existing=localStorage.getItem("vaultData");
let arr= existing ? JSON.parse(existing) : [];
arr.push(entry);
localStorage.setItem("vaultData",JSON.stringify(arr));

popup.style.display="none";
bankFields.innerHTML="";
cardFields.innerHTML="";
upiFields.innerHTML="";
walletFields.innerHTML="";
customTitle.value="";
customValue.value="";

loadData();
}

// ================= LOAD DATA =================
function loadData(){
let d=localStorage.getItem("vaultData");
if(!d) return;

let arr=JSON.parse(d);
let html="";

arr.forEach((data)=>{

data.bank.forEach(b=>{
 html+=`<div class="section"><b>BANK</b><br>
 ${b.map(v=>`<input value="${v}" readonly>
 <button class="copy" onclick="copy('${v}')">Copy</button>`).join("<br>")}
 </div>`;
});

data.card.forEach(c=>{
 html+=`<div class="section"><b>CARD</b><br>
 ${c.map(v=>`<input value="${v}" readonly>
 <button class="copy" onclick="copy('${v}')">Copy</button>`).join("<br>")}
 </div>`;
});

data.upi.forEach(u=>{
 html+=`<div class="section"><b>UPI</b><br>
 ${u.map(v=>`<input value="${v}" readonly>
 <button class="copy" onclick="copy('${v}')">Copy</button>`).join("<br>")}
 </div>`;
});

data.wallet.forEach(w=>{
 html+=`<div class="section"><b>WALLET</b><br>
 ${w.map(v=>`<input value="${v}" readonly>
 <button class="copy" onclick="copy('${v}')">Copy</button>`).join("<br>")}
 </div>`;
});

if(data.customTitle){
 html+=`<div class="section"><b>${data.customTitle}</b><br>
 <input value="${data.customValue}" readonly>
 <button class="copy" onclick="copy('${data.customValue}')">Copy</button>
 </div>`;
}

});

dataArea.innerHTML=html;
}

function copy(t){
navigator.clipboard.writeText(t);
alert("Copied");
}
</script>

</body>
</html>
